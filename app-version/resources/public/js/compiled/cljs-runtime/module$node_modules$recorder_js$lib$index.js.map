{
"version":3,
"file":"module$node_modules$recorder_js$lib$index.js",
"lineCount":7,
"mappings":"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",
"sources":["node_modules/recorder-js/lib/index.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$recorder_js$lib$index\"] = function(global,require,module,exports) {\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _microphone = require('./microphone');\n\nvar _microphone2 = _interopRequireDefault(_microphone);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar defaultConfig = {\n  nFrequencyBars: 255,\n  onAnalysed: null\n};\n\nvar Recorder = function () {\n  function Recorder(audioContext) {\n    var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Recorder);\n\n    this.config = Object.assign({}, defaultConfig, config);\n\n    this.audioContext = audioContext;\n    this.audioInput = null;\n    this.realAudioInput = null;\n    this.inputPoint = null;\n    this.audioRecorder = null;\n    this.rafID = null;\n    this.analyserContext = null;\n    this.recIndex = 0;\n    this.stream = null;\n\n    this.updateAnalysers = this.updateAnalysers.bind(this);\n  }\n\n  _createClass(Recorder, [{\n    key: 'init',\n    value: function init(stream) {\n      var _this = this;\n\n      return new Promise(function (resolve) {\n        _this.inputPoint = _this.audioContext.createGain();\n\n        _this.stream = stream;\n\n        _this.realAudioInput = _this.audioContext.createMediaStreamSource(stream);\n        _this.audioInput = _this.realAudioInput;\n        _this.audioInput.connect(_this.inputPoint);\n\n        _this.analyserNode = _this.audioContext.createAnalyser();\n        _this.analyserNode.fftSize = 2048;\n        _this.inputPoint.connect(_this.analyserNode);\n\n        _this.audioRecorder = new _microphone2.default(_this.inputPoint);\n\n        var zeroGain = _this.audioContext.createGain();\n        zeroGain.gain.value = 0.0;\n\n        _this.inputPoint.connect(zeroGain);\n        zeroGain.connect(_this.audioContext.destination);\n\n        _this.updateAnalysers();\n\n        resolve();\n      });\n    }\n  }, {\n    key: 'start',\n    value: function start() {\n      var _this2 = this;\n\n      return new Promise(function (resolve, reject) {\n        if (!_this2.audioRecorder) {\n          reject('Not currently recording');\n          return;\n        }\n\n        _this2.audioRecorder.clear();\n        _this2.audioRecorder.record();\n\n        resolve(_this2.stream);\n      });\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      var _this3 = this;\n\n      return new Promise(function (resolve) {\n        _this3.audioRecorder.stop();\n\n        _this3.audioRecorder.getBuffer(function (buffer) {\n          _this3.audioRecorder.exportWAV(function (blob) {\n            return resolve({ buffer: buffer, blob: blob });\n          });\n        });\n      });\n    }\n  }, {\n    key: 'updateAnalysers',\n    value: function updateAnalysers() {\n      if (this.config.onAnalysed) {\n        requestAnimationFrame(this.updateAnalysers);\n\n        var freqByteData = new Uint8Array(this.analyserNode.frequencyBinCount);\n\n        this.analyserNode.getByteFrequencyData(freqByteData);\n\n        var data = new Array(255);\n        var lastNonZero = 0;\n        var datum = void 0;\n\n        for (var idx = 0; idx < 255; idx += 1) {\n          datum = Math.floor(freqByteData[idx]) - Math.floor(freqByteData[idx]) % 5;\n\n          if (datum !== 0) {\n            lastNonZero = idx;\n          }\n\n          data[idx] = datum;\n        }\n\n        this.config.onAnalysed({ data: data, lineTo: lastNonZero });\n      }\n    }\n  }, {\n    key: 'setOnAnalysed',\n    value: function setOnAnalysed(handler) {\n      this.config.onAnalysed = handler;\n    }\n  }]);\n\n  return Recorder;\n}();\n\nRecorder.download = function download(blob) {\n  var filename = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'audio';\n\n  _microphone2.default.forceDownload(blob, filename + '.wav');\n};\n\nexports.default = Recorder;\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperty","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_microphone2","_microphone","__esModule","default","defaultConfig","nFrequencyBars","onAnalysed","Recorder","audioContext","config","arguments","undefined","instance","TypeError","assign","analyserContext","rafID","audioRecorder","inputPoint","realAudioInput","audioInput","recIndex","stream","updateAnalysers","bind","init","_this","Promise","resolve","createGain","createMediaStreamSource","connect","analyserNode","createAnalyser","fftSize","zeroGain","gain","destination","start","_this2","reject","clear","record","stop","_this3","getBuffer","buffer","exportWAV","blob","requestAnimationFrame","freqByteData","Uint8Array","frequencyBinCount","getByteFrequencyData","data","Array","lastNonZero","datum","idx","Math","floor","lineTo","setOnAnalysed","handler","download","Recorder.download","forceDownload","filename"]
}
