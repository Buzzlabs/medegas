shadow$provide.module$node_modules$pitchfinder$lib$detectors$acf2plus=function(global,require,module,exports){var __assign=this&&this.__assign||function(){__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t};return __assign.apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var DEFAULT_PARAMS={sampleRate:44100};exports.ACF2PLUS=function(params){void 0===
params&&(params=DEFAULT_PARAMS);var sampleRate=__assign(__assign({},DEFAULT_PARAMS),params).sampleRate;return function(float32AudioBuffer){var maxShift=float32AudioBuffer.length,rms=0,i;for(i=0;i<maxShift;i++){var tmp=float32AudioBuffer[i];rms+=tmp*tmp}rms=Math.sqrt(rms/maxShift);if(.01>rms)return-1;rms=0;tmp=maxShift-1;for(i=0;i<maxShift/2;i++)if(.2>Math.abs(float32AudioBuffer[i])){rms=i;break}for(i=1;i<maxShift/2;i++)if(.2>Math.abs(float32AudioBuffer[maxShift-i])){tmp=maxShift-i;break}tmp=float32AudioBuffer.slice(rms,
tmp);maxShift=tmp.length;float32AudioBuffer=Array(maxShift).fill(0);for(i=0;i<maxShift;i++)for(rms=0;rms<maxShift-i;rms++)float32AudioBuffer[i]+=tmp[rms]*tmp[rms+i];for(i=0;float32AudioBuffer[i]>float32AudioBuffer[i+1];)i++;for(tmp=rms=-1;i<maxShift;i++)float32AudioBuffer[i]>rms&&(rms=float32AudioBuffer[i],tmp=i);i=tmp;maxShift=float32AudioBuffer[i-1];rms=float32AudioBuffer[i+1];(float32AudioBuffer=(maxShift+rms-2*float32AudioBuffer[i])/2)&&(i-=(rms-maxShift)/2/(2*float32AudioBuffer));return sampleRate/
i}}}
//# sourceMappingURL=module$node_modules$pitchfinder$lib$detectors$acf2plus.js.map
